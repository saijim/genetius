---
import type { PaperData } from '~/lib/markdown';

interface Props {
  paper: PaperData;
}

const { paper } = Astro.props;
---
<article class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors">
  <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-2">{paper.title}</h2>

  {paper.authors && paper.authors.length > 0 && (
    <p class="text-sm text-gray-700 dark:text-gray-300 mb-1">
      <span class="font-medium">Authors:</span> {paper.authors.join(', ')}
    </p>
  )}

  <div class="text-sm text-gray-600 dark:text-gray-400 mb-3">
    <span class="font-medium">Date:</span> {paper.date} ·{' '}
    <span class="font-medium">Version:</span> {paper.version}
  </div>

  <a
    href={`https://doi.org/${paper.doi}`}
    target="_blank"
    rel="noopener noreferrer"
    aria-label={`View full paper for DOI ${paper.doi}`}
    class="text-sm text-blue-700 dark:text-blue-300 hover:underline mb-3 block"
  >
    DOI: {paper.doi}
  </a>

  {paper.category && (
    <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
      <span class="font-medium">Category:</span> {paper.category}
    </p>
  )}

  {paper.summary && (
    <div class="mb-4">
      <details class="group">
        <summary class="cursor-pointer text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 flex items-center select-none">
          <span class="mr-2 transition-transform group-open:rotate-90">▶</span>
          AI Summary
        </summary>
        <p class="text-gray-700 dark:text-gray-300 leading-relaxed mt-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700">
          {paper.summary}
        </p>
      </details>
    </div>
  )}

  {paper.keywords && paper.keywords.length > 0 && (
    <div class="flex flex-wrap gap-2">
      {paper.keywords.map((keyword) => (
        <span
          class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm rounded-full"
        >
          {keyword}
        </span>
      ))}
    </div>
  )}
</article>
